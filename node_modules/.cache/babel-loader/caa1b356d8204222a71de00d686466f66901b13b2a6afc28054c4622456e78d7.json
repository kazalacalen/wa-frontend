{"ast":null,"code":"import _regeneratorRuntime from \"/Users/mateo/Desktop/kkz/wa-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/mateo/Desktop/kkz/wa-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport axios from \"axios\";\nvar Service = axios.create({\n  baseURL: \"https://localhost:3000\",\n  timeout: 1000\n});\nService.interceptors.request.use(function (request) {\n  try {\n    request.headers[\"Authorization\"] = \"Bearer \" + Auth.getToken();\n  } catch (e) {\n    console.error(e);\n  }\n  return request;\n});\nService.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  if (error.response.status == 401 || error.response.status == 403) {\n    Auth.logout();\n  }\n});\nvar Auth = {\n  register: function register(username, password, name) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return Service.post(\"/SignUp\", {\n              username: username,\n              password: password,\n              name: name\n            });\n          case 2:\n            return _context.abrupt(\"return\", true);\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }))();\n  },\n  login: function login(username, password) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var response, user;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return Service.post(\"/LoginPage\", {\n              username: username,\n              password: password\n            });\n          case 2:\n            response = _context2.sent;\n            user = response.data;\n            localStorage.setItem(\"user\", JSON.stringify(user));\n            return _context2.abrupt(\"return\", true);\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }))();\n  },\n  logout: function logout() {\n    localStorage.removeItem(\"user\");\n  },\n  getUser: function getUser() {\n    return JSON.parse(localStorage.getItem(\"user\"));\n  },\n  getName: function getName() {\n    var user = Auth.getNameId();\n    if (user && user.name) {\n      return user.name;\n    } else {\n      return false;\n    }\n  },\n  getToken: function getToken() {\n    var user = Auth.getUser();\n    if (user && user.token) {\n      return user.token;\n    } else return false;\n  },\n  authenticated: function authenticated() {\n    var user = Auth.getUser();\n    if (user && user.token) {\n      return true;\n    }\n    return false;\n  },\n  state: {\n    get authenticated() {\n      return Auth.authenticated();\n    },\n    get userUsername() {\n      var user = Auth.getUser();\n      if (user) {\n        return user.username;\n      }\n    },\n    get userName() {\n      var user = Auth.getUser();\n      if (user) {\n        return user.name;\n      }\n    }\n  }\n};\nexport { Service, Auth }; // exportamo Service za ručne pozive ili Posts za","map":{"version":3,"names":["axios","Service","create","baseURL","timeout","interceptors","request","use","headers","Auth","getToken","e","console","error","response","status","logout","register","username","password","name","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","post","abrupt","stop","login","_callee2","user","_callee2$","_context2","sent","data","localStorage","setItem","JSON","stringify","removeItem","getUser","parse","getItem","getName","getNameId","token","authenticated","state","userUsername","userName"],"sources":["/Users/mateo/Desktop/kkz/wa-frontend/src/services/index.js"],"sourcesContent":["import axios from \"axios\";\n\nlet Service = axios.create({\n  baseURL: \"https://localhost:3000\",\n  timeout: 1000,\n});\n\nService.interceptors.request.use((request) => {\n  try {\n    request.headers[\"Authorization\"] = \"Bearer \" + Auth.getToken();\n  } catch (e) {\n    console.error(e);\n  }\n  return request;\n});\n\nService.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response.status == 401 || error.response.status == 403) {\n      Auth.logout();\n    }\n  }\n);\n\nlet Auth = {\n  async register(username, password, name) {\n    await Service.post(\"/SignUp\", {\n      username: username,\n      password: password,\n      name: name,\n    });\n\n    return true;\n  },\n\n  async login(username, password) {\n    let response = await Service.post(\"/LoginPage\", {\n      username: username,\n      password: password,\n    });\n\n    let user = response.data;\n\n    localStorage.setItem(\"user\", JSON.stringify(user));\n\n    return true;\n  },\n  logout() {\n    localStorage.removeItem(\"user\");\n  },\n\n  getUser() {\n    return JSON.parse(localStorage.getItem(\"user\"));\n  },\n\n  getName() {\n    let user = Auth.getNameId();\n    if (user && user.name) {\n      return user.name;\n    } else {\n      return false;\n    }\n  },\n  getToken() {\n    let user = Auth.getUser();\n    if (user && user.token) {\n      return user.token;\n    } else return false;\n  },\n\n  authenticated() {\n    let user = Auth.getUser();\n    if (user && user.token) {\n      return true;\n    }\n    return false;\n  },\n\n  state: {\n    get authenticated() {\n      return Auth.authenticated();\n    },\n    get userUsername() {\n      let user = Auth.getUser();\n\n      if (user) {\n        return user.username;\n      }\n    },\n    get userName() {\n      let user = Auth.getUser();\n\n      if (user) {\n        return user.name;\n      }\n    },\n  },\n};\nexport { Service, Auth }; // exportamo Service za ručne pozive ili Posts za\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}