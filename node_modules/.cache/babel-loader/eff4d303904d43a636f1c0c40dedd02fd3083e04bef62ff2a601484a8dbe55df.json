{"ast":null,"code":"import axios from \"axios\";\nimport router from \"@/router\"; // Pretpostavka da je router komponenta učitana kao router\n\nlet Service = axios.create({\n  baseURL: \"http://localhost:3100/\",\n  timeout: 3000,\n  headers: {\n    Accept: \"application/json\",\n    \"Content-Type\": \"application/json\"\n  }\n});\nService.interceptors.request.use(request => {\n  try {\n    request.headers['Authorization'] = 'Bearer ' + Auth.getToken();\n  } catch (e) {\n    console.error(e);\n  }\n  return request;\n});\nService.interceptors.response.use(response => response, async error => {\n  if (error.response.status === 401 || error.response.status === 403) {\n    await Auth.logout();\n    router.go();\n  }\n  return Promise.reject(error);\n});\nlet Auth = {\n  async login(username, password) {\n    try {\n      let response = await Service.post(\"/auth\", {\n        username: username,\n        password: password\n      });\n      let user = response.data;\n      localStorage.setItem(\"user\", JSON.stringify(user));\n      return true;\n    } catch (error) {\n      return false;\n    }\n  },\n  async register(username, password) {\n    let response = await Service.post(\"/users\", {\n      username,\n      password\n    });\n    let user = response.data;\n    localStorage.setItem(\"user\", JSON.stringify(user));\n    return true;\n  },\n  logout() {\n    localStorage.removeItem('user');\n  },\n  getUser() {\n    return JSON.parse(localStorage.getItem('user'));\n  },\n  getToken() {\n    let user = Auth.getUser();\n    if (user && user.token) {\n      return user.token;\n    }\n  },\n  authenticated() {\n    let user = Auth.getUser();\n    return !!user && !!user.token;\n  }\n};\nexport { Auth };","map":{"version":3,"names":["axios","router","Service","create","baseURL","timeout","headers","Accept","interceptors","request","use","Auth","getToken","e","console","error","response","status","logout","go","Promise","reject","login","username","password","post","user","data","localStorage","setItem","JSON","stringify","register","removeItem","getUser","parse","getItem","token","authenticated"],"sources":["/Users/alen/Desktop/projekt/wa-frontend/service/index.js"],"sourcesContent":["import axios from \"axios\";\nimport router from \"@/router\"; // Pretpostavka da je router komponenta učitana kao router\n\nlet Service = axios.create({\n    baseURL: \"http://localhost:3100/\",\n    timeout: 3000,\n    headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n    },\n});\n\nService.interceptors.request.use((request) => {\n    try {\n        request.headers['Authorization'] = 'Bearer ' + Auth.getToken();\n    } catch (e) {\n        console.error(e);\n    }\n    return request;\n});\n\nService.interceptors.response.use((response) => response, async (error) => {\n    if (error.response.status === 401 || error.response.status === 403) {\n        await Auth.logout();\n        router.go();\n    }\n    return Promise.reject(error);\n});\n\nlet Auth = {\n    async login(username, password) {\n        try {\n            let response = await Service.post(\"/auth\", {\n                username: username,\n                password: password\n            });\n            let user = response.data\n            localStorage.setItem(\"user\", JSON.stringify(user));\n            return true;\n        } catch (error) {\n            return false;\n        }\n    },\n    async register(username, password) {\n        let response = await Service.post(\"/users\", {\n            username,\n            password,\n        });\n        let user = response.data;\n        localStorage.setItem(\"user\", JSON.stringify(user));\n        return true;\n    },\n    logout() {\n        localStorage.removeItem('user');\n    },\n    getUser() {\n        return JSON.parse(localStorage.getItem('user'));\n    },\n    getToken() {\n        let user = Auth.getUser();\n        if (user && user.token) {\n            return user.token;\n        }\n    },\n    authenticated() {\n        let user = Auth.getUser();\n        return !!user && !!user.token;\n    },\n};\n\nexport { Auth };\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,UAAU,CAAC,CAAC;;AAE/B,IAAIC,OAAO,GAAGF,KAAK,CAACG,MAAM,CAAC;EACvBC,OAAO,EAAE,wBAAwB;EACjCC,OAAO,EAAE,IAAI;EACbC,OAAO,EAAE;IACLC,MAAM,EAAE,kBAAkB;IAC1B,cAAc,EAAE;EACpB;AACJ,CAAC,CAAC;AAEFL,OAAO,CAACM,YAAY,CAACC,OAAO,CAACC,GAAG,CAAED,OAAO,IAAK;EAC1C,IAAI;IACAA,OAAO,CAACH,OAAO,CAAC,eAAe,CAAC,GAAG,SAAS,GAAGK,IAAI,CAACC,QAAQ,CAAC,CAAC;EAClE,CAAC,CAAC,OAAOC,CAAC,EAAE;IACRC,OAAO,CAACC,KAAK,CAACF,CAAC,CAAC;EACpB;EACA,OAAOJ,OAAO;AAClB,CAAC,CAAC;AAEFP,OAAO,CAACM,YAAY,CAACQ,QAAQ,CAACN,GAAG,CAAEM,QAAQ,IAAKA,QAAQ,EAAE,MAAOD,KAAK,IAAK;EACvE,IAAIA,KAAK,CAACC,QAAQ,CAACC,MAAM,KAAK,GAAG,IAAIF,KAAK,CAACC,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;IAChE,MAAMN,IAAI,CAACO,MAAM,CAAC,CAAC;IACnBjB,MAAM,CAACkB,EAAE,CAAC,CAAC;EACf;EACA,OAAOC,OAAO,CAACC,MAAM,CAACN,KAAK,CAAC;AAChC,CAAC,CAAC;AAEF,IAAIJ,IAAI,GAAG;EACP,MAAMW,KAAKA,CAACC,QAAQ,EAAEC,QAAQ,EAAE;IAC5B,IAAI;MACA,IAAIR,QAAQ,GAAG,MAAMd,OAAO,CAACuB,IAAI,CAAC,OAAO,EAAE;QACvCF,QAAQ,EAAEA,QAAQ;QAClBC,QAAQ,EAAEA;MACd,CAAC,CAAC;MACF,IAAIE,IAAI,GAAGV,QAAQ,CAACW,IAAI;MACxBC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACL,IAAI,CAAC,CAAC;MAClD,OAAO,IAAI;IACf,CAAC,CAAC,OAAOX,KAAK,EAAE;MACZ,OAAO,KAAK;IAChB;EACJ,CAAC;EACD,MAAMiB,QAAQA,CAACT,QAAQ,EAAEC,QAAQ,EAAE;IAC/B,IAAIR,QAAQ,GAAG,MAAMd,OAAO,CAACuB,IAAI,CAAC,QAAQ,EAAE;MACxCF,QAAQ;MACRC;IACJ,CAAC,CAAC;IACF,IAAIE,IAAI,GAAGV,QAAQ,CAACW,IAAI;IACxBC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACL,IAAI,CAAC,CAAC;IAClD,OAAO,IAAI;EACf,CAAC;EACDR,MAAMA,CAAA,EAAG;IACLU,YAAY,CAACK,UAAU,CAAC,MAAM,CAAC;EACnC,CAAC;EACDC,OAAOA,CAAA,EAAG;IACN,OAAOJ,IAAI,CAACK,KAAK,CAACP,YAAY,CAACQ,OAAO,CAAC,MAAM,CAAC,CAAC;EACnD,CAAC;EACDxB,QAAQA,CAAA,EAAG;IACP,IAAIc,IAAI,GAAGf,IAAI,CAACuB,OAAO,CAAC,CAAC;IACzB,IAAIR,IAAI,IAAIA,IAAI,CAACW,KAAK,EAAE;MACpB,OAAOX,IAAI,CAACW,KAAK;IACrB;EACJ,CAAC;EACDC,aAAaA,CAAA,EAAG;IACZ,IAAIZ,IAAI,GAAGf,IAAI,CAACuB,OAAO,CAAC,CAAC;IACzB,OAAO,CAAC,CAACR,IAAI,IAAI,CAAC,CAACA,IAAI,CAACW,KAAK;EACjC;AACJ,CAAC;AAED,SAAS1B,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}