{"ast":null,"code":"import _regeneratorRuntime from \"/Users/alen/Desktop/projekt/wa-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/alen/Desktop/projekt/wa-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport axios from \"axios\";\nvar Service = axios.create({\n  baseURL: \"http://localhost:3000\",\n  timeout: 1000\n});\nService.interceptors.request.use(function (request) {\n  try {\n    request.headers[\"Authorization\"] = \"Bearer \" + Auth.getToken();\n  } catch (e) {\n    console.error(e);\n  }\n  return request;\n});\nService.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  if (error.response && (error.response.status === 401 || error.response.status === 403)) {\n    Auth.logout();\n  }\n  return Promise.reject(error);\n});\nvar Auth = {\n  register: function register(username, password) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return Service.post(\"/register\", {\n              username: username,\n              password: password\n            });\n          case 2:\n            return _context.abrupt(\"return\", true);\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }))();\n  },\n  loginPage: function loginPage(username, password) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var response, user;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return Service.post(\"/login\", {\n              username: username,\n              password: password\n            });\n          case 2:\n            response = _context2.sent;\n            user = response.data;\n            localStorage.setItem(\"user\", JSON.stringify(user));\n            return _context2.abrupt(\"return\", true);\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }))();\n  },\n  loginAdmin: function loginAdmin(username, password) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n      var response, user;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return Service.post(\"/admin\", {\n              username: username,\n              password: password\n            });\n          case 2:\n            response = _context3.sent;\n            user = response.data;\n            localStorage.setItem(\"user\", JSON.stringify(user));\n            return _context3.abrupt(\"return\", true);\n          case 6:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3);\n    }))();\n  },\n  logout: function logout() {\n    localStorage.removeItem(\"user\");\n  },\n  getUser: function getUser() {\n    return JSON.parse(localStorage.getItem(\"user\"));\n  },\n  getName: function getName() {\n    var user = JSON.parse(localStorage.getItem(\"user\"));\n    return user.name;\n  },\n  getToken: function getToken() {\n    var user = Auth.getUser();\n    if (user && user.token) {\n      return user.token;\n    } else return false;\n  },\n  authenticated: function authenticated() {\n    var user = Auth.getUser();\n    if (user && user.token) {\n      return true;\n    }\n    return false;\n  },\n  state: {\n    get authenticated() {\n      return Auth.authenticated();\n    },\n    get userUsername() {\n      var user = Auth.getUser();\n      if (user) {\n        return user.username;\n      }\n      return false;\n    },\n    get userName() {\n      var user = Auth.getUser();\n      if (user) {\n        return user.name;\n      }\n      return false;\n    }\n  },\n  sendFormToBackend: function sendFormToBackend(formData) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n      var route, response;\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            _context4.t0 = formData.type;\n            _context4.next = _context4.t0 === 'bazen' ? 4 : _context4.t0 === 'apartman' ? 6 : _context4.t0 === 'studio' ? 8 : _context4.t0 === 'dvoriste' ? 10 : _context4.t0 === 'igraonica' ? 12 : 14;\n            break;\n          case 4:\n            route = '/bazen';\n            return _context4.abrupt(\"break\", 15);\n          case 6:\n            route = '/apartman';\n            return _context4.abrupt(\"break\", 15);\n          case 8:\n            route = '/studio';\n            return _context4.abrupt(\"break\", 15);\n          case 10:\n            route = '/dvoriste';\n            return _context4.abrupt(\"break\", 15);\n          case 12:\n            route = '/igraonica';\n            return _context4.abrupt(\"break\", 15);\n          case 14:\n            throw new Error('Unsupported form type');\n          case 15:\n            _context4.next = 17;\n            return Service.post(route, formData);\n          case 17:\n            response = _context4.sent;\n            return _context4.abrupt(\"return\", response.data);\n          case 21:\n            _context4.prev = 21;\n            _context4.t1 = _context4[\"catch\"](0);\n            console.error(\"Error sending form data to backend:\", _context4.t1);\n            throw new Error(\"Error sending form data to backend\");\n          case 25:\n          case \"end\":\n            return _context4.stop();\n        }\n      }, _callee4, null, [[0, 21]]);\n    }))();\n  },\n  getFromBackend: function getFromBackend(route) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n      var response;\n      return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n        while (1) switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.prev = 0;\n            _context5.next = 3;\n            return Service.get(route);\n          case 3:\n            response = _context5.sent;\n            return _context5.abrupt(\"return\", response.data);\n          case 7:\n            _context5.prev = 7;\n            _context5.t0 = _context5[\"catch\"](0);\n            console.error(\"Error getting data from backend:\", _context5.t0);\n            throw new Error(\"Error getting data from backend\");\n          case 11:\n          case \"end\":\n            return _context5.stop();\n        }\n      }, _callee5, null, [[0, 7]]);\n    }))();\n  }\n};\nexport { Service, Auth };","map":{"version":3,"names":["axios","Service","create","baseURL","timeout","interceptors","request","use","headers","Auth","getToken","e","console","error","response","status","logout","Promise","reject","register","username","password","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","post","abrupt","stop","loginPage","_callee2","user","_callee2$","_context2","sent","data","localStorage","setItem","JSON","stringify","loginAdmin","_callee3","_callee3$","_context3","removeItem","getUser","parse","getItem","getName","name","token","authenticated","state","userUsername","userName","sendFormToBackend","formData","_callee4","route","_callee4$","_context4","t0","type","Error","t1","getFromBackend","_callee5","_callee5$","_context5","get"],"sources":["/Users/alen/Desktop/projekt/wa-frontend/src/views/index.js"],"sourcesContent":["import axios from \"axios\";\n\nlet Service = axios.create({\n  baseURL: \"http://localhost:3000\",\n  timeout: 1000,\n});\n\nService.interceptors.request.use((request) => {\n  try {\n    request.headers[\"Authorization\"] = \"Bearer \" + Auth.getToken();\n  } catch (e) {\n    console.error(e);\n  }\n  return request;\n});\n\nService.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (\n      error.response &&\n      (error.response.status === 401 || error.response.status === 403)\n    ) {\n      Auth.logout();\n    }\n    return Promise.reject(error);\n  }\n);\n\nlet Auth = {\n  async register(username, password) {\n    await Service.post(\"/register\", {\n      username: username,\n      password: password,\n    });\n\n    return true;\n  },\n\n  async loginPage(username, password) {\n    let response = await Service.post(\"/login\", {\n      username: username,\n      password: password,\n    });\n    let user = response.data;\n\n    localStorage.setItem(\"user\", JSON.stringify(user));\n\n    return true;\n  },\n\n  async loginAdmin(username, password) {\n    let response = await Service.post(\"/admin\", {\n      username: username,\n      password: password,\n    });\n    let user = response.data;\n\n    localStorage.setItem(\"user\", JSON.stringify(user));\n\n    return true;\n  },\n\n  logout() {\n    localStorage.removeItem(\"user\");\n  },\n\n  getUser() {\n    return JSON.parse(localStorage.getItem(\"user\"));\n  },\n\n  getName() {\n    let user = JSON.parse(localStorage.getItem(\"user\"));\n    return user.name;\n  },\n\n  getToken() {\n    let user = Auth.getUser();\n    if (user && user.token) {\n      return user.token;\n    } else return false;\n  },\n\n  authenticated() {\n    let user = Auth.getUser();\n    if (user && user.token) {\n      return true;\n    }\n    return false;\n  },\n\n  state: {\n    get authenticated() {\n      return Auth.authenticated();\n    },\n    get userUsername() {\n      let user = Auth.getUser();\n\n      if (user) {\n        return user.username;\n      }\n      return false;\n    },\n    get userName() {\n      let user = Auth.getUser();\n\n      if (user) {\n        return user.name;\n      }\n      return false;\n    },\n  },\n  async sendFormToBackend(formData) {\n    try {\n      let route;\n      switch (formData.type) {\n        case 'bazen':\n          route = '/bazen';\n          break;\n        case 'apartman':\n          route = '/apartman';\n          break;\n        case 'studio':\n          route = '/studio';\n          break;\n        case 'dvoriste':\n          route = '/dvoriste';\n          break;\n        case 'igraonica':\n          route = '/igraonica';\n          break;\n        default:\n          throw new Error('Unsupported form type');\n      }\n  \n      let response = await Service.post(route, formData);\n      return response.data;\n    } catch (error) {\n      console.error(\"Error sending form data to backend:\", error);\n      throw new Error(\"Error sending form data to backend\");\n    }\n  },\n\n  async getFromBackend(route) {\n    try {\n      let response = await Service.get(route);\n      return response.data;\n    } catch (error) {\n      console.error(\"Error getting data from backend:\", error);\n      throw new Error(\"Error getting data from backend\");\n    }\n  },\n};\n\nexport { Service, Auth };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}